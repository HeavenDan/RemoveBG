<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Background Remover</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif;margin:0;background:#0b1021;color:#e7e9ee;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:24px}
  .card{width:100%;max-width:720px;background:#121832;border:1px solid #1e2748;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);padding:24px}
  h1{font-size:24px;margin:0 0 16px}
  p{margin:0 0 16px;color:#aab3c5}
  .row{display:flex;gap:16px;flex-wrap:wrap}
  .col{flex:1;min-width:260px}
  .input{display:flex;gap:12px;align-items:center}
  input[type=file]{flex:1;padding:10px;border:1px dashed #33406b;border-radius:10px;background:#0d1430;color:#e7e9ee}
  button{padding:12px 16px;border:0;border-radius:10px;background:#4f6af7;color:white;font-weight:600;cursor:pointer}
  button[disabled]{opacity:.6;cursor:not-allowed}
  .preview{margin-top:16px;border:1px solid #1e2748;border-radius:12px;overflow:hidden;background:#0d1430;display:flex;align-items:center;justify-content:center;min-height:320px}
  img{max-width:100%;height:auto;display:block}
  .actions{display:flex;gap:12px;margin-top:12px}
  .error{color:#ff6b6b;margin-top:12px}
  a{text-decoration:none}
</style>
</head>
<body>
  <div class="card">
    <h1>Remove background</h1>
    <p>Upload an image and get a transparent PNG.</p>
    <div class="row">
      <div class="col">
        <form id="form">
          <div class="input">
            <input id="file" type="file" accept="image/*" />
            <button id="submit" type="submit">Remove</button>
          </div>
        </form>
        <div class="error" id="error"></div>
        <div class="actions" id="actions" style="display:none">
          <a id="download" href="#" download="no-bg.png">
            <button type="button">Download PNG</button>
          </a>
          <button id="reset" type="button">Reset</button>
        </div>
      </div>
      <div class="col">
        <div class="preview" id="preview">
          <span id="placeholder">No image</span>
          <img id="result" alt="" style="display:none"/>
        </div>
      </div>
    </div>
  </div>
<script>
const form=document.getElementById('form');
const fileInput=document.getElementById('file');
const submitBtn=document.getElementById('submit');
const errorBox=document.getElementById('error');
const resultImg=document.getElementById('result');
const placeholder=document.getElementById('placeholder');
const actions=document.getElementById('actions');
const downloadLink=document.getElementById('download');
const resetBtn=document.getElementById('reset');

form.addEventListener('submit',async(e)=>{
  e.preventDefault();
  errorBox.textContent='';
  if(!fileInput.files||fileInput.files.length===0){errorBox.textContent='Choose a file';return;}
  submitBtn.disabled=true;
  submitBtn.textContent='Processing...';
  placeholder.style.display='none';
  resultImg.style.display='none';
  actions.style.display='none';
  try{
    const fd=new FormData();
    fd.append('file',fileInput.files[0]);
    const r=await fetch('/api/remove-bg',{method:'POST',body:fd});
    if(!r.ok){const t=await r.text();throw new Error(t||'Request failed');}
    const blob=await r.blob();
    const url=URL.createObjectURL(blob);
    resultImg.src=url;
    resultImg.style.display='block';
    downloadLink.href=url;
    actions.style.display='flex';
  }catch(err){
    errorBox.textContent='Error: '+(err&&err.message?err.message:'Unknown');
  }finally{
    submitBtn.disabled=false;
    submitBtn.textContent='Remove';
  }
});

resetBtn.addEventListener('click',()=>{
  fileInput.value='';
  resultImg.src='';
  resultImg.style.display='none';
  placeholder.style.display='block';
  actions.style.display='none';
  errorBox.textContent='';
});
</script>
</body>
</html>


